# encoding: utf-8

patch:
  "switches/@0/reset": 1
  "switches/@1/reset": 0
  "switches/@2/reset": 1

  translator/dictionary: luna_pinyin.extended
  translator/initial_quality: 1.2
  translator/prism: double_pinyin_flypy
  translator/preedit_format: {}
  translator/enable_completion: true

  switches/@next:
    name: emoji
    reset: 1
    states: [ "F", "T" ]
  'engine/filters/@before 0':
     simplifier@emoji

  # https://github.com/rime/rime-emoji/blob/master/emoji.yaml
  emoji:
    opencc_config: emoji.json
    option_name: emoji
    tips: none
    inherit_comment: false

  # https://github.com/BlindingDark/rime-lua-select-character
  __include: lua_select_character:/patch
  key_binder/select_first_character: 'minus'
  key_binder/select_last_character: 'equal'

  # https://github.com/functoreality/rime-flypy-zrmfast/
  schema/dependencies/+:
    - chaizi
    - melt_eng

  reverse_lookup/dictionary: chaizi_flypy
  reverse_lookup/enable_completion: true
  reverse_lookup/tips: 〔拆字〕
  reverse_lookup/preedit_format:
    - xform/([nljqxy])v/$1ü/
  reverse_lookupcomment_format:
    - xform/([nljqxy])v/$1ü/

  # https://github.com/hchunhui/librime-lua
  # https://github.com/LufsX/rime/blob/master/lufs_flypy.schema.yaml
  'engine/translators/@after 3':
    lua_translator@date_translator
  # https://dvel.me/posts/make-rime-en-better
  'engine/translators/@after 4':
    table_translator@melt_eng
  melt_eng:
    dictionary: melt_eng
    enable_sentence: false
    enable_user_dict: false
    initial_quality: 1.1
    comment_format:
      - xform/.*//
  'engine/filters/@after 0':
    lua_filters@reduce_english_filter

  traditionalize:
    option_name: traditionalization
    opencc_config: t2s.json
    tips: none
    excluded_types: [ reverse_lookup ]
  switches/@2:
    name: traditionalization
    reset: 1
    states: [ "繁", "简" ]
  'engine/filters/@0':
     'simplifier@traditionalize'

  # 八股文
  grammar:
    language: zh-hant-t-essay-bgw
  translator/contextual_suggestions: true
  translator/max_homophones: 7
  translator/max_homographs: 7

  # 自定义符号
  punctuator:
    import_preset: default
    full_shape:
      "/" : "、"
      "\\" : "、"
      "[" : "「"
      "]" : "」"
      "{" : "『"
      "}" : "』"
      "*" : "＊"
      "<" : "《"
      ">" : "》"
    half_shape:
      "/" : "、"
      "\\" : "、"
      "[" : "「"
      "]" : "」"
      "{" : "『"
      "}" : "』"
      "*" : "*"
      "<" : "《"
      ">" : "》"
